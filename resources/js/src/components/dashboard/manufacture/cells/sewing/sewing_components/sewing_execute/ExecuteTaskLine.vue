<template>

    <div class="flex">

        <!-- __ Checker -->
        <AppLabelTSWrapper :render-object="render.checker"/>

        <!-- __ id -->
        <AppLabelTSWrapper :render-object="render.id"/>

        <!-- __ position -->
        <AppLabelTSWrapper :render-object="render.position"/>

        <!-- __ –†–∞–∑–º–µ—Ä  -->
        <AppLabelTSWrapper :render-object="render.size"/>

        <!-- __ –ú–æ–¥–µ–ª—å (–ß–µ—Ö–æ–ª) -->
        <AppLabelTSWrapper :render-object="render.cover"/>

        <!-- __ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ -->
        <AppLabelTSWrapper :render-object="render.amount"/>

        <!-- __ –¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã -->
        <AppLabelTSWrapper :render-object="render.time"/>

        <!-- __ –£–®–ú -->
        <AppLabelTSWrapper :render-object="render.universal"/>

        <!-- __ –ê–®–ú -->
        <AppLabelTSWrapper :render-object="render.auto"/>

        <!-- __ –ì–° -->
        <AppLabelTSWrapper :render-object="render.solid_hard"/>

        <!-- __ –ì–ü -->
        <AppLabelTSWrapper :render-object="render.solid_lite"/>

        <!-- __ –¢–ö–ß -->
        <AppLabelTSWrapper :render-object="render.tkch"/>

        <!-- __ –ö–∞–Ω—Ç -->
        <AppLabelTSWrapper :render-object="render.kant"/>

        <!-- __ –¢–∫–∞–Ω—å -->
        <AppLabelTSWrapper :render-object="render.textile"/>

        <!-- __ –°–æ—Å—Ç–∞–≤ -->
        <AppLabelTSWrapper :render-object="render.composition"/>

        <!-- __ –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 1 -->
        <AppLabelTSWrapper :render-object="render.describe_1"/>

        <!-- __ –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 2 -->
        <AppLabelTSWrapper :render-object="render.describe_2"/>

        <!-- __ –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 3 -->
        <AppLabelTSWrapper :render-object="render.describe_3"/>

        <!-- __ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
        <AppLabelTSWrapper :render-object="render.finished_at"/>

    </div>


</template>

<script lang="ts" setup>
import { computed, reactive } from 'vue'

import type { IColorTypes, IRenderData, ISewingMachineKeys, ISewingTaskLine } from '@/types'

import {
    getCoverSizeString,
    getSewingLineMachineType,
    getSewingTaskModelCoverName,
    getTimeString
} from '@/app/helpers/manufacture/helpers_sewing.ts'

import AppLabelTSWrapper from '@/components/dashboard/manufacture/cells/components/AppLabelTSWrapper.vue'
import { formatTimeInFullFormat } from '@/app/helpers/helpers_date'
import { SEWING_MACHINES } from '@/app/constants/sewing.ts'
// import AppLabelMultilineTSWrapper
//     from '@/components/dashboard/manufacture/cells/components/AppLabelMultilineTSWrapper.vue'


interface IProps {
    sewingLine: ISewingTaskLine
    fieldsWidth: Record<string, string>
}

const props = defineProps<IProps>()

// __ –û–±—ä–µ–∫—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
// const DEFAULT_WIDTH_BOOL = 'w-[70px]'
// const COLLAPSED_WIDTH    = 'w-[30px]'
const DEFAULT_HEIGHT   = 'h-[20px]'
const HEADER_TYPE      = 'primary'
const DATA_TYPE        = 'primary'
const DEFAULT_TYPE     = 'dark'
const ACCENT_TYPE      = 'success'
const HEADER_TEXT_SIZE = 'mini'
const DATA_TEXT_SIZE   = 'micro'
const HEADER_ALIGN     = 'center'
const DATA_ALIGN       = 'left'

const render: IRenderData = reactive({
    checker:          {
        id:             () => 'id-checker',
        header:         ['', ''],
        width:          props.fieldsWidth.checker,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => finishedAtType.value,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç?...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.finished_at ? '‚úì' : '‚úó'
    },
    id:          {
        id:             () => 'id-search',
        header:         ['', ''],
        width:          props.fieldsWidth.id,
        height:         DEFAULT_HEIGHT,
        show:           false,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => finishedAtType.value,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîçid...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.id.toString()
    },
    position:    {
        id:             () => 'position-search',
        header:         ['', ''],
        width:          props.fieldsWidth.position,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => finishedAtType.value,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç‚Ññ –ø/–ø...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.position.toString(),
    },
    size:        {
        id:             () => 'size-search',
        header:         ['', ''],
        width:          props.fieldsWidth.size,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => finishedAtType.value,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–†–∞–∑–º–µ—Ä...',
        data:           (/*sewingLine: ISewingTaskLine*/) => getSize.value
    },
    cover:       {
        id:             () => 'cover-search',
        header:         ['', ''],
        width:          props.fieldsWidth.cover,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => finishedAtType.value,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      DATA_ALIGN,
        placeholder:    'üîç–ß–µ—Ö–æ–ª...',
        data:           (/*sewingLine: ISewingTaskLine*/) => getSewingTaskModelCoverName(props.sewingLine)
    },
    amount:      {
        id:             () => 'amount-search',
        header:         ['', ''],
        width:          props.fieldsWidth.amount,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => DEFAULT_TYPE,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–ö–æ–ª-–≤–æ...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.amount.toString()
    },
    time:      {
        id:             () => 'time-search',
        header:         ['', ''],
        width:          props.fieldsWidth.time,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => getTime.value === '00—Å' ? 'danger' : getType.value,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–í—Ä–µ–º—è...',
        data:           (/*sewingLine: ISewingTaskLine*/) => getTime.value
    },
    universal:   {
        id:             () => 'universal-search',
        header:         ['', ''],
        width:          props.fieldsWidth.machine,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => getTypeForMachine(SEWING_MACHINES.UNIVERSAL),
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–£–®–ú...',
        data:           (/*sewingLine: ISewingTaskLine*/) => '–£'
    },
    auto:        {
        id:             () => 'auto-search',
        header:         ['', ''],
        width:          props.fieldsWidth.machine,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => getTypeForMachine(SEWING_MACHINES.AUTO),
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–ê–®–ú...',
        data:           (/*sewingLine: ISewingTaskLine*/) => '–ê'
    },
    solid_hard:  {
        id:             () => 'solid-hard-search',
        header:         ['', ''],
        width:          props.fieldsWidth.machine,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => getTypeForMachine(SEWING_MACHINES.SOLID_HARD),
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–ì–°...',
        data:           (/*sewingLine: ISewingTaskLine*/) => '–ì–°'
    },
    solid_lite:  {
        id:             () => 'solid-lite-search',
        header:         ['', ''],
        width:          props.fieldsWidth.machine,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => getTypeForMachine(SEWING_MACHINES.SOLID_LITE),
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–ì–ü...',
        data:           (/*sewingLine: ISewingTaskLine*/) => '–ì–ü'
    },
    tkch:     {
        id:             () => 'tkch-search',
        header:         ['', ''],
        width:          props.fieldsWidth.tkch,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => DEFAULT_TYPE,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–¢–ö–ß...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.order_line.model.main.tkch ?? ''
    },
    kant:     {
        id:             () => 'kant-search',
        header:         ['', ''],
        width:          props.fieldsWidth.kant,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => DEFAULT_TYPE,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–ö–∞–Ω—Ç...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.order_line.model.main.kant ?? ''
    },
    textile:     {
        id:             () => 'textile-search',
        header:         ['', ''],
        width:          props.fieldsWidth.textile,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => DEFAULT_TYPE,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–¢–∫–∞–Ω—å...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.order_line.textile ?? ''
    },
    composition: {
        id:             () => 'composition-search',
        header:         ['', ''],
        width:          props.fieldsWidth.composition,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => DEFAULT_TYPE,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      DATA_ALIGN,
        placeholder:    'üîç–°–æ—Å—Ç–∞–≤...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.order_line.composition ?? '',
        class:          'truncate',
    },
    describe_1:  {
        id:             () => 'describe-1-search',
        header:         ['', ''],
        width:          props.fieldsWidth.describe_1,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => DEFAULT_TYPE,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      DATA_ALIGN,
        placeholder:    'üîç–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 1...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.order_line.describe_1 ?? '',
        class:          'truncate',
    },
    describe_2:  {
        id:             () => 'describe-2-search',
        header:         ['', ''],
        width:          props.fieldsWidth.describe_2,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => DEFAULT_TYPE,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      DATA_ALIGN,
        placeholder:    'üîç–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 2...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.order_line.describe_2 ?? '',
        class:          'truncate',
    },
    describe_3:  {
        id:             () => 'describe-3-search',
        header:         ['', ''],
        width:          props.fieldsWidth.describe_3,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => DEFAULT_TYPE,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      DATA_ALIGN,
        placeholder:    'üîç–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 3...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.order_line.describe_3 ?? '',
        class:          'truncate',
    },
    finished_at: {
        id:             () => 'finished-at-search',
        header:         ['', ''],
        width:          props.fieldsWidth.finished_at,
        height:         DEFAULT_HEIGHT,
        show:           true,
        headerType:     () => HEADER_TYPE,
        dataType:       () => DATA_TYPE,
        type:           () => finishedAtType.value,
        headerTextSize: HEADER_TEXT_SIZE,
        dataTextSize:   DATA_TEXT_SIZE,
        headerAlign:    HEADER_ALIGN,
        dataAlign:      'center',
        placeholder:    'üîç–í—Ä–µ–º—è...',
        data:           (/*sewingLine: ISewingTaskLine*/) => props.sewingLine.finished_at ? formatTimeInFullFormat(props.sewingLine.finished_at) : ''
    },
})

// __ –¢–∏–ø –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –¥–ª—è —Å—Ç–µ–≥–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã —ç–ª–µ–º–µ–Ω—Ç–∞
const getTypeForMachine = (sewingMachineTarget: ISewingMachineKeys) => {

    // !!! –ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω !!!

    if (machineType.value === SEWING_MACHINES.AVERAGE) {
        // if (sewingMachineTarget === SEWING_MACHINES.UNKNOWN) {
        //     return 'danger'
        // }
        return ACCENT_TYPE
    }

    if (machineType.value === sewingMachineTarget) {
        // if (sewingMachineTarget === SEWING_MACHINES.UNKNOWN) {
        //     return 'danger'
        // }
        return ACCENT_TYPE
    }

    return DEFAULT_TYPE
}

// __ –ü–æ–ª—É—á–∞–µ–º —Ç–∏–ø —Å—Ç–µ–≥–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
const machineType = computed(() => getSewingLineMachineType(props.sewingLine))

// __ –ü–æ–ª—É—á–∞–µ–º —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã
const getTime = computed(() => getTimeString(props.sewingLine, true).replaceAll('.', ''))

// __ –ü–æ–ª—É—á–∞–µ–º —Ä–∞–∑–º–µ—Ä —á–µ—Ö–ª–∞ (–í—ã—Å–æ—Ç–∞ –∏–∑ —Ä–∞–∑–º–µ—Ä–æ–≤ —á–µ—Ö–ª–∞ –º–æ–¥–µ–ª–∏)
const getSize = computed(() => getCoverSizeString(props.sewingLine))

// __ –¢–∏–ø –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
const getType = computed<IColorTypes>(() =>
    DEFAULT_TYPE
    // props.sewingLine === globalManageTaskCardActiveSewingLine.value ? ACTIVE_TYPE : 'dark'
)

// __ –¢–∏–ø –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
const finishedAtType = computed<IColorTypes>(() => props.sewingLine.finished_at ? 'success' : 'danger')

</script>

<style scoped>

</style>
